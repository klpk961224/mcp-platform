# å¼€å‘è§„èŒƒæ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°**ï¼šä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
- **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
- **åˆ›å»ºæ—¥æœŸ**ï¼š2026-01-13
- **æ–‡æ¡£ç±»å‹**ï¼šå¼€å‘è§„èŒƒæ–‡æ¡£

---

## 1. ä»£ç è§„èŒƒï¼ˆPythonï¼‰

### 1.1 å‘½åè§„èŒƒ

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|-----|------|------|
| **å˜é‡** | å°å†™å­—æ¯+ä¸‹åˆ’çº¿ | `user_name`, `is_active` |
| **å¸¸é‡** | å¤§å†™å­—æ¯+ä¸‹åˆ’çº¿ | `MAX_RETRY_COUNT`, `API_BASE_URL` |
| **å‡½æ•°** | å°å†™å­—æ¯+ä¸‹åˆ’çº¿ | `get_user_info()`, `validate_password()` |
| **ç±»** | å¤§é©¼å³° | `UserService`, `DatabaseManager` |
| **æ¨¡å—** | å°å†™å­—æ¯+ä¸‹åˆ’çº¿ | `user_service.py`, `database_manager.py` |
| **ç§æœ‰å˜é‡** | ä¸‹åˆ’çº¿å‰ç¼€ | `_internal_var`, `__private_var` |

### 1.2 ä»£ç æ ¼å¼

**ç¼©è¿›**ï¼šä½¿ç”¨4ä¸ªç©ºæ ¼ç¼©è¿›

**è¡Œé•¿**ï¼šæ¯è¡Œä¸è¶…è¿‡100ä¸ªå­—ç¬¦

**ç©ºè¡Œ**ï¼š
- å‡½æ•°ä¹‹é—´ç©º2è¡Œ
- ç±»ä¹‹é—´ç©º2è¡Œ
- æ–¹æ³•ä¹‹é—´ç©º1è¡Œ

**å¯¼å…¥é¡ºåº**ï¼š
1. æ ‡å‡†åº“å¯¼å…¥
2. ç¬¬ä¸‰æ–¹åº“å¯¼å…¥
3. æœ¬åœ°æ¨¡å—å¯¼å…¥

```python
# æ ‡å‡†åº“
import os
import sys

# ç¬¬ä¸‰æ–¹åº“
from fastapi import FastAPI
from sqlalchemy import create_engine

# æœ¬åœ°æ¨¡å—
from app.models import User
from app.utils import helper
```

### 1.3 ç±»å‹æ³¨è§£

```python
from typing import List, Optional, Dict, Any

def get_user(user_id: str) -> Optional[Dict[str, Any]]:
    """è·å–ç”¨æˆ·ä¿¡æ¯
    
    Args:
        user_id: ç”¨æˆ·ID
        
    Returns:
        ç”¨æˆ·ä¿¡æ¯å­—å…¸ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›None
    """
    pass

def create_users(users: List[Dict[str, Any]]) -> bool:
    """æ‰¹é‡åˆ›å»ºç”¨æˆ·
    
    Args:
        users: ç”¨æˆ·åˆ—è¡¨
        
    Returns:
        æ˜¯å¦åˆ›å»ºæˆåŠŸ
    """
    pass
```

### 1.4 æ–‡æ¡£å­—ç¬¦ä¸²

```python
def calculate_discount(price: float, discount_rate: float) -> float:
    """è®¡ç®—æŠ˜æ‰£åçš„ä»·æ ¼
    
    Args:
        price: åŸä»·
        discount_rate: æŠ˜æ‰£ç‡ï¼ˆ0-1ï¼‰
        
    Returns:
        æŠ˜æ‰£åçš„ä»·æ ¼
        
    Raises:
        ValueError: å¦‚æœå‚æ•°ä¸åˆæ³•
        
    Examples:
        >>> calculate_discount(100, 0.1)
        90.0
    """
    if not 0 <= discount_rate <= 1:
        raise ValueError("æŠ˜æ‰£ç‡å¿…é¡»åœ¨0-1ä¹‹é—´")
    return price * (1 - discount_rate)
```

---

## 2. ä»£ç è§„èŒƒï¼ˆTypeScriptï¼‰

### 2.1 å‘½åè§„èŒƒ

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|-----|------|------|
| **å˜é‡** | å°é©¼å³° | `userName`, `isActive` |
| **å¸¸é‡** | å¤§å†™å­—æ¯+ä¸‹åˆ’çº¿ | `MAX_RETRY_COUNT`, `API_BASE_URL` |
| **å‡½æ•°** | å°é©¼å³° | `getUserInfo()`, `validatePassword()` |
| **ç±»** | å¤§é©¼å³° | `UserService`, `DatabaseManager` |
| **æ¥å£** | å¤§é©¼å³°+Iå‰ç¼€ | `IUserService`, `IDatabaseManager` |
| **ç±»å‹** | å¤§é©¼å³° | `UserInfo`, `ApiResponse` |
| **æšä¸¾** | å¤§é©¼å³° | `UserRole`, `UserStatus` |

### 2.2 ä»£ç æ ¼å¼

**ç¼©è¿›**ï¼šä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿›

**è¡Œé•¿**ï¼šæ¯è¡Œä¸è¶…è¿‡100ä¸ªå­—ç¬¦

**ç©ºè¡Œ**ï¼š
- å‡½æ•°ä¹‹é—´ç©º2è¡Œ
- ç±»ä¹‹é—´ç©º2è¡Œ
- æ–¹æ³•ä¹‹é—´ç©º1è¡Œ

**å¯¼å…¥é¡ºåº**ï¼š
1. Vueç›¸å…³å¯¼å…¥
2. ç¬¬ä¸‰æ–¹åº“å¯¼å…¥
3. æœ¬åœ°æ¨¡å—å¯¼å…¥
4. ç±»å‹å¯¼å…¥

```typescript
// Vueç›¸å…³
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'

// ç¬¬ä¸‰æ–¹åº“
import axios from 'axios'
import { ElMessage } from 'element-plus'

// æœ¬åœ°æ¨¡å—
import { useUserStore } from '@/stores/user'
import { formatDate } from '@/utils/date'

// ç±»å‹å¯¼å…¥
import type { UserInfo, ApiResponse } from '@/types'
```

### 2.3 ç±»å‹å®šä¹‰

```typescript
// æ¥å£å®šä¹‰
interface UserInfo {
  id: string
  username: string
  email: string
  phone?: string
  status: UserStatus
}

// ç±»å‹å®šä¹‰
type UserStatus = 'active' | 'inactive' | 'locked'

// æšä¸¾å®šä¹‰
enum UserRole {
  ADMIN = 'admin',
  USER = 'user',
  GUEST = 'guest'
}

// æ³›å‹ç±»å‹
interface ApiResponse<T = any> {
  success: boolean
  code: number
  message: string
  data: T
  timestamp: string
}
```

### 2.4 ç»„ä»¶å®šä¹‰

```vue
<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage } from 'element-plus'
import type { UserInfo } from '@/types'

// Props
interface Props {
  userId?: string
  loading?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  loading: false
})

// Emits
interface Emits {
  (e: 'update:modelValue', value: string): void
  (e: 'change', value: UserInfo): void
}

const emit = defineEmits<Emits>()

// State
const userInfo = ref<UserInfo | null>(null)
const loading = ref(false)

// Computed
const isUserLoaded = computed(() => !!userInfo.value)

// Methods
async function loadUserInfo() {
  loading.value = true
  try {
    const response = await api.getUserInfo(props.userId!)
    userInfo.value = response.data
    emit('change', response.data)
  } catch (error) {
    ElMessage.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥')
  } finally {
    loading.value = false
  }
}

// Lifecycle
onMounted(() => {
  if (props.userId) {
    loadUserInfo()
  }
})
</script>
```

---

## 3. Gitæäº¤è§„èŒƒ

### 3.1 æäº¤ä¿¡æ¯æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 3.2 Typeç±»å‹

| Type | è¯´æ˜ |
|------|------|
| **feat** | æ–°åŠŸèƒ½ |
| **fix** | ä¿®å¤bug |
| **docs** | æ–‡æ¡£æ›´æ–° |
| **style** | ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ |
| **refactor** | é‡æ„ï¼ˆä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bugï¼‰ |
| **perf** | æ€§èƒ½ä¼˜åŒ– |
| **test** | æµ‹è¯•ç›¸å…³ |
| **chore** | æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ |
| **revert** | å›æ»šä¹‹å‰çš„æäº¤ |

### 3.3 ScopeèŒƒå›´

| Scope | è¯´æ˜ |
|-------|------|
| **auth** | è®¤è¯æˆæƒæ¨¡å— |
| **user** | ç”¨æˆ·ç®¡ç†æ¨¡å— |
| **tenant** | å¤šç§Ÿæˆ·æ¨¡å— |
| **mcp** | MCPå·¥å…·ç®¡ç†æ¨¡å— |
| **api** | APIæ¥å£ |
| **ui** | å‰ç«¯UI |
| **db** | æ•°æ®åº“ç›¸å…³ |

### 3.4 æäº¤ç¤ºä¾‹

```bash
# æ–°åŠŸèƒ½
git commit -m "feat(user): æ·»åŠ ç”¨æˆ·æ‰¹é‡å¯¼å…¥åŠŸèƒ½"

# ä¿®å¤bug
git commit -m "fix(auth): ä¿®å¤Tokenåˆ·æ–°å¤±è´¥çš„é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°APIæ¥å£æ–‡æ¡£"

# é‡æ„
git commit -m "refactor(user): é‡æ„ç”¨æˆ·æŸ¥è¯¢é€»è¾‘ï¼Œæé«˜æ€§èƒ½"
```

---

## 4. åˆ†æ”¯ç®¡ç†ç­–ç•¥

### 4.1 åˆ†æ”¯ç±»å‹

| åˆ†æ”¯ | è¯´æ˜ | å‘½åè§„èŒƒ |
|-----|------|---------|
| **master** | ä¸»åˆ†æ”¯ï¼Œç”Ÿäº§ç¯å¢ƒä»£ç  | - |
| **develop** | å¼€å‘åˆ†æ”¯ï¼Œå¼€å‘ç¯å¢ƒä»£ç  | - |
| **feature/** | åŠŸèƒ½åˆ†æ”¯ | feature/user-import |
| **bugfix/** | ä¿®å¤åˆ†æ”¯ | bugfix/token-refresh |
| **hotfix/** | ç´§æ€¥ä¿®å¤åˆ†æ”¯ | hotfix/security-patch |
| **release/** | å‘å¸ƒåˆ†æ”¯ | release/v1.0.0 |

### 4.2 åˆ†æ”¯æµç¨‹

```mermaid
graph LR
    A[develop] --> B[featureåˆ†æ”¯]
    B --> C[å¼€å‘å®Œæˆ]
    C --> D[åˆå¹¶åˆ°develop]
    D --> E[releaseåˆ†æ”¯]
    E --> F[æµ‹è¯•]
    F --> G[åˆå¹¶åˆ°master]
    G --> H[æ‰“tag]
```

### 4.3 åˆ†æ”¯æ“ä½œ

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/user-import develop

# åˆå¹¶åˆ°develop
git checkout develop
git merge --no-ff feature/user-import

# åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v1.0.0 develop

# åˆå¹¶åˆ°master
git checkout master
git merge --no-ff release/v1.0.0

# æ‰“tag
git tag -a v1.0.0 -m "å‘å¸ƒç‰ˆæœ¬1.0.0"
```

---

## 5. ä»£ç å®¡æŸ¥è§„èŒƒ

### 5.1 å®¡æŸ¥æ¸…å•

**åŠŸèƒ½æ€§**ï¼š
- [ ] ä»£ç å®ç°äº†é¢„æœŸåŠŸèƒ½
- [ ] ä»£ç é€»è¾‘æ­£ç¡®
- [ ] è¾¹ç•Œæ¡ä»¶å¤„ç†æ­£ç¡®

**ä»£ç è´¨é‡**ï¼š
- [ ] ä»£ç å¯è¯»æ€§å¥½
- [ ] ä»£ç å¤ç”¨æ€§å¥½
- [ ] ä»£ç æ€§èƒ½åˆç†
- [ ] ä»£ç ç¬¦åˆè§„èŒƒ

**å®‰å…¨æ€§**ï¼š
- [ ] æ²¡æœ‰å®‰å…¨æ¼æ´
- [ ] è¾“å…¥éªŒè¯å®Œå–„
- [ ] è¾“å‡ºç¼–ç æ­£ç¡®

**æµ‹è¯•**ï¼š
- [ ] æœ‰å•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡
- [ ] æµ‹è¯•ç”¨ä¾‹å®Œå–„

**æ–‡æ¡£**ï¼š
- [ ] æœ‰ä»£ç æ³¨é‡Š
- [ ] æœ‰APIæ–‡æ¡£
- [ ] æœ‰README

### 5.2 å®¡æŸ¥æµç¨‹

1. åˆ›å»ºPull Request
2. æŒ‡å®šå®¡æŸ¥è€…
3. å®¡æŸ¥è€…è¿›è¡Œä»£ç å®¡æŸ¥
4. æ ¹æ®å®¡æŸ¥æ„è§ä¿®æ”¹ä»£ç 
5. å®¡æŸ¥é€šè¿‡ååˆå¹¶ä»£ç 

---

## 6. æ–‡æ¡£ç¼–å†™è§„èŒƒ

### 6.1 ä»£ç æ³¨é‡Š

**è¡Œå†…æ³¨é‡Š**ï¼š
```python
# è®¡ç®—æŠ˜æ‰£åçš„ä»·æ ¼
discounted_price = price * (1 - discount_rate)
```

**å—æ³¨é‡Š**ï¼š
```python
"""
ç”¨æˆ·æœåŠ¡ç±»

æä¾›ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬ç”¨æˆ·åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ç­‰æ“ä½œã€‚
"""
```

**å‡½æ•°æ³¨é‡Š**ï¼š
```python
def get_user(user_id: str) -> Optional[Dict[str, Any]]:
    """è·å–ç”¨æˆ·ä¿¡æ¯
    
    Args:
        user_id: ç”¨æˆ·ID
        
    Returns:
        ç”¨æˆ·ä¿¡æ¯å­—å…¸ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›None
        
    Raises:
        ValueError: å¦‚æœuser_idä¸ºç©º
        
    Examples:
        >>> get_user("123")
        {"id": "123", "username": "admin"}
    """
    pass
```

### 6.2 APIæ–‡æ¡£

```python
@router.get("/users/{user_id}", response_model=UserResponse)
async def get_user(
    user_id: str,
    current_user: dict = Depends(get_current_user)
):
    """è·å–ç”¨æˆ·è¯¦æƒ…
    
    Args:
        user_id: ç”¨æˆ·ID
        current_user: å½“å‰ç™»å½•ç”¨æˆ·ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼‰
        
    Returns:
        ç”¨æˆ·è¯¦æƒ…
        
    Raises:
        404: ç”¨æˆ·ä¸å­˜åœ¨
        403: æ— æƒé™è®¿é—®
    """
    pass
```

### 6.3 READMEæ–‡æ¡£

```markdown
# é¡¹ç›®åç§°

## ç®€ä»‹
ç®€è¦æè¿°é¡¹ç›®

## åŠŸèƒ½ç‰¹æ€§
- åŠŸèƒ½1
- åŠŸèƒ½2

## å®‰è£…
\`\`\`bash
pip install -r requirements.txt
\`\`\`

## ä½¿ç”¨
\`\`\`python
python main.py
\`\`\`

## è´¡çŒ®
æ¬¢è¿è´¡çŒ®ä»£ç 

## è®¸å¯è¯
MIT
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£](./2-æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£.md)
- [å‰ç«¯æ¶æ„è®¾è®¡æ–‡æ¡£](./5-å‰ç«¯æ¶æ„è®¾è®¡æ–‡æ¡£.md)
- [APIæ¥å£è®¾è®¡æ–‡æ¡£](./4-APIæ¥å£è®¾è®¡æ–‡æ¡£.md)

---

## ğŸ’¡ æ³¨æ„äº‹é¡¹

1. **ä»£ç è§„èŒƒ**ï¼šä¸¥æ ¼éµå¾ªä»£ç è§„èŒƒï¼Œä¿æŒä»£ç é£æ ¼ä¸€è‡´
2. **ç±»å‹å®‰å…¨**ï¼šTypeScriptä¸­é¿å…ä½¿ç”¨anyï¼ŒPythonä¸­æ·»åŠ ç±»å‹æ³¨è§£
3. **æ³¨é‡Šè§„èŒƒ**ï¼šä¸ºå¤æ‚é€»è¾‘æ·»åŠ æ³¨é‡Šï¼Œæé«˜ä»£ç å¯è¯»æ€§
4. **Gitè§„èŒƒ**ï¼šéµå¾ªGitæäº¤è§„èŒƒï¼Œæäº¤ä¿¡æ¯æ¸…æ™°æ˜ç¡®
5. **ä»£ç å®¡æŸ¥**ï¼šæ‰€æœ‰ä»£ç å¿…é¡»ç»è¿‡å®¡æŸ¥åæ‰èƒ½åˆå¹¶

---

**æ–‡æ¡£ç‰ˆæœ¬å†å²**ï¼š

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|-----|------|------|---------|
| v1.0 | 2026-01-13 | AIåŠ©æ‰‹ | åˆå§‹ç‰ˆæœ¬ |

---