# æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°**ï¼šä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
- **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
- **åˆ›å»ºæ—¥æœŸ**ï¼š2026-01-13
- **æ–‡æ¡£ç±»å‹**ï¼šæµ‹è¯•æ–‡æ¡£

---

## 1. æµ‹è¯•ç­–ç•¥

### 1.1 æµ‹è¯•é‡‘å­—å¡”

```mermaid
graph TB
    A[å•å…ƒæµ‹è¯•<br/>70%] --> B[é›†æˆæµ‹è¯•<br/>20%]
    B --> C[ç«¯åˆ°ç«¯æµ‹è¯•<br/>10%]
```

### 1.2 æµ‹è¯•ç±»å‹

| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡ | è´Ÿè´£äºº | å·¥å…· |
|---------|--------|--------|------|
| **å•å…ƒæµ‹è¯•** | >80% | å¼€å‘äººå‘˜ | pytest |
| **é›†æˆæµ‹è¯•** | >60% | æµ‹è¯•äººå‘˜ | pytest |
| **æ€§èƒ½æµ‹è¯•** | - | æµ‹è¯•äººå‘˜ | JMeter |
| **å®‰å…¨æµ‹è¯•** | - | å®‰å…¨ä¸“å®¶ | OWASP ZAP |

---

## 2. å•å…ƒæµ‹è¯•è§„èŒƒ

### 2.1 Pythonå•å…ƒæµ‹è¯•

```python
# tests/test_user_service.py
import pytest
from app.services.user_service import UserService
from app.models.user import User

def test_create_user():
    """æµ‹è¯•åˆ›å»ºç”¨æˆ·"""
    user_service = UserService()
    user_data = {
        "username": "test_user",
        "email": "test@example.com",
        "password": "password123"
    }
    user = user_service.create_user(user_data)
    assert user.id is not None
    assert user.username == "test_user"

def test_get_user_by_id():
    """æµ‹è¯•æ ¹æ®IDè·å–ç”¨æˆ·"""
    user_service = UserService()
    user = user_service.get_user_by_id("1")
    assert user is not None
    assert user.id == "1"

def test_update_user():
    """æµ‹è¯•æ›´æ–°ç”¨æˆ·"""
    user_service = UserService()
    update_data = {"email": "newemail@example.com"}
    user = user_service.update_user("1", update_data)
    assert user.email == "newemail@example.com"

def test_delete_user():
    """æµ‹è¯•åˆ é™¤ç”¨æˆ·"""
    user_service = UserService()
    result = user_service.delete_user("1")
    assert result is True
```

### 2.2 TypeScriptå•å…ƒæµ‹è¯•

```typescript
// tests/userStore.spec.ts
import { setActivePinia, createPinia } from 'pinia'
import { describe, it, expect, beforeEach } from 'vitest'
import { useUserStore } from '@/stores/user'

describe('User Store', () => {
  beforeEach(() => {
    setActivePinia(createPinia())
  })

  it('should set user info', () => {
    const userStore = useUserStore()
    userStore.setUserInfo({
      id: '1',
      username: 'admin',
      email: 'admin@example.com'
    })
    expect(userStore.userInfo).toBeDefined()
    expect(userStore.userInfo?.username).toBe('admin')
  })

  it('should clear user info', () => {
    const userStore = useUserStore()
    userStore.clearUserInfo()
    expect(userStore.userInfo).toBeNull()
  })
})
```

---

## 3. é›†æˆæµ‹è¯•è§„èŒƒ

### 3.1 APIé›†æˆæµ‹è¯•

```python
# tests/test_api/test_user_api.py
import pytest
from httpx import AsyncClient
from main import app

@pytest.mark.asyncio
async def test_create_user_api():
    """æµ‹è¯•åˆ›å»ºç”¨æˆ·API"""
    async with AsyncClient(app=app, base_url="http://test") as ac:
        response = await ac.post(
            "/api/v1/users",
            json={
                "username": "test_user",
                "email": "test@example.com",
                "password": "password123"
            }
        )
        assert response.status_code == 201
        data = response.json()
        assert data["success"] is True
        assert data["data"]["username"] == "test_user"

@pytest.mark.asyncio
async def test_get_user_list_api():
    """æµ‹è¯•è·å–ç”¨æˆ·åˆ—è¡¨API"""
    async with AsyncClient(app=app, base_url="http://test") as ac:
        response = await ac.get("/api/v1/users?page=1&size=10")
        assert response.status_code == 200
        data = response.json()
        assert data["success"] is True
        assert "items" in data["data"]
        assert "total" in data["data"]
```

---

## 4. æ€§èƒ½æµ‹è¯•è§„èŒƒ

### 4.1 æ€§èƒ½æµ‹è¯•æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹è¯•å·¥å…· |
|-----|--------|---------|
| **å“åº”æ—¶é—´** | < 200ms (95%) | JMeter |
| **ååé‡** | > 1000 TPS | JMeter |
| **å¹¶å‘ç”¨æˆ·** | > 1000 | JMeter |
| **å¯ç”¨æ€§** | > 99.9% | JMeter |

### 4.2 JMeteræµ‹è¯•è®¡åˆ’

```xml
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="5.0">
  <hashTree>
    <TestPlan guiclass="TestPlan" testclass="TestPlan" testname="æ€§èƒ½æµ‹è¯•è®¡åˆ’">
      <elementProp name="TestPlan.comments" elementType="string"/>
      <stringProp name="TestPlan.user_define_classpath"/>
      <boolProp name="TestPlan.functional_mode" value="false"/>
      <boolProp name="TestPlan.serialize_threadgroups" value="false"/>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments">
        <collectionProp name="Arguments.arguments">
          <elementProp name="BASE_URL" elementType="Argument">
            <stringProp name="Argument.value">http://localhost:8000</stringProp>
          </elementProp>
        </collectionProp>
      </elementProp>
      <ThreadGroup guiclass="ThreadGroup" testclass="ThreadGroup" testname="ç”¨æˆ·æŸ¥è¯¢æ¥å£">
        <stringProp name="ThreadGroup.num_threads">100</stringProp>
        <stringProp name="ThreadGroup.ramp_time">10</stringProp>
        <stringProp name="ThreadGroup.duration">60</stringProp>
        <boolProp name="ThreadGroup.scheduler">true</boolProp>
        <elementProp name="ThreadGroup.main_controller" elementType="ThreadGroup"/>
        <LoopController guiclass="LoopController" testclass="LoopController" testname="å¾ªç¯æ§åˆ¶å™¨"/>
        <HTTPSamplerProxy guiclass="HTTPSamplerProxy" testclass="HTTPSamplerProxy" testname="HTTPè¯·æ±‚">
          <stringProp name="HTTPSampler.domain">localhost</stringProp>
          <stringProp name="HTTPSampler.port">8000</stringProp>
          <stringProp name="HTTPSampler.path">/api/v1/users</stringProp>
          <stringProp name="HTTPSampler.method">GET</stringProp>
        </HTTPSamplerProxy>
      </ThreadGroup>
    </TestPlan>
  </hashTree>
</jmeterTestPlan>
```

---

## 5. æµ‹è¯•æµç¨‹å›¾

```mermaid
graph TD
    A[ç¼–å†™æµ‹è¯•ç”¨ä¾‹] --> B[æ‰§è¡Œå•å…ƒæµ‹è¯•]
    B --> C[æ‰§è¡Œé›†æˆæµ‹è¯•]
    C --> D[æ‰§è¡Œæ€§èƒ½æµ‹è¯•]
    D --> E[ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š]
    E --> F[ä¿®å¤é—®é¢˜]
    F --> A
```

---

## 6. æµ‹è¯•è¦†ç›–ç‡è¦æ±‚

| æ¨¡å— | è¦†ç›–ç‡è¦æ±‚ |
|-----|-----------|
| **ç”¨æˆ·æ¨¡å—** | >85% |
| **æƒé™æ¨¡å—** | >85% |
| **MCPå·¥å…·æ¨¡å—** | >85% |
| **å¤šæ•°æ®æºæ¨¡å—** | >80% |
| **æ•´ä½“** | >80% |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å¼€å‘è§„èŒƒæ–‡æ¡£](./6-å¼€å‘è§„èŒƒæ–‡æ¡£.md)
- [éƒ¨ç½²æ–‡æ¡£](./8-éƒ¨ç½²æ–‡æ¡£.md)
- [APIæ¥å£è®¾è®¡æ–‡æ¡£](./4-APIæ¥å£è®¾è®¡æ–‡æ¡£.md)

---

## ğŸ’¡ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•ç‹¬ç«‹**ï¼šæµ‹è¯•ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒéš”ç¦»
2. **æµ‹è¯•æ•°æ®**ï¼šä½¿ç”¨æµ‹è¯•æ•°æ®ï¼Œé¿å…å½±å“ç”Ÿäº§æ•°æ®
3. **æµ‹è¯•æ¸…ç†**ï¼šæµ‹è¯•å®Œæˆåæ¸…ç†æµ‹è¯•æ•°æ®
4. **æµ‹è¯•æ–‡æ¡£**ï¼šåŠæ—¶æ›´æ–°æµ‹è¯•æ–‡æ¡£
5. **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šé›†æˆåˆ°CI/CDæµç¨‹

---

**æ–‡æ¡£ç‰ˆæœ¬å†å²**ï¼š

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|-----|------|------|---------|
| v1.0 | 2026-01-13 | AIåŠ©æ‰‹ | åˆå§‹ç‰ˆæœ¬ |

---