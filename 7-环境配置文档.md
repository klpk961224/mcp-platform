# ç¯å¢ƒé…ç½®æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°**ï¼šä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
- **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
- **åˆ›å»ºæ—¥æœŸ**ï¼š2026-01-13
- **æ–‡æ¡£ç±»å‹**ï¼šç¯å¢ƒé…ç½®æ–‡æ¡£

---

## 1. å¼€å‘ç¯å¢ƒé…ç½®

### 1.1 å‰ç«¯ç¯å¢ƒé…ç½®

**Node.jsç‰ˆæœ¬**ï¼š18+

**ä¾èµ–å®‰è£…**ï¼š
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**å‰ç«¯ç¯å¢ƒå˜é‡é…ç½®**ï¼š

**frontend/.env.development**ï¼š
```bash
# åº”ç”¨é…ç½®
VITE_APP_TITLE=ä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
VITE_APP_PORT=3000

# APIé…ç½®
VITE_API_BASE_URL=http://localhost:9080/api/v1
VITE_API_TIMEOUT=30000

# åŠŸèƒ½å¼€å…³
VITE_USE_MOCK=false
VITE_USE_CACHE=true
```

**å‰ç«¯å¼€å‘æœåŠ¡å™¨ç«¯å£**ï¼š3000

### 1.2 åç«¯ç¯å¢ƒé…ç½®

**Pythonç‰ˆæœ¬**ï¼š3.13+

**ä¾èµ–å®‰è£…**ï¼š
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**åç«¯æœåŠ¡ç«¯å£é…ç½®**ï¼š

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|-----|------|------|
| è®¤è¯åŸŸæœåŠ¡ | 8001 | è®¤è¯æˆæƒ |
| ç”¨æˆ·åŸŸæœåŠ¡ | 8002 | ç”¨æˆ·ã€éƒ¨é—¨ã€ç§Ÿæˆ·ç®¡ç† |
| æƒé™åŸŸæœåŠ¡ | 8003 | è§’è‰²ã€æƒé™ã€èœå•ç®¡ç† |
| ç³»ç»ŸåŸŸæœåŠ¡ | 8004 | MCPå·¥å…·ã€å¤šæ•°æ®æºã€å­—å…¸ç®¡ç† |
| æ”¯æ’‘åŸŸæœåŠ¡ | 8005 | æ—¥å¿—ã€é€šçŸ¥ç®¡ç† |
| ä¸šåŠ¡åŸŸæœåŠ¡ | 8006 | ä¸šåŠ¡é€»è¾‘ï¼ˆç©ºå£³ï¼‰ |

### 1.3 åç«¯ç¯å¢ƒå˜é‡é…ç½®

**.env.development**ï¼š
```bash
# åº”ç”¨é…ç½®
APP_NAME=ä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
APP_ENV=development
APP_DEBUG=True

# æ•°æ®åº“é…ç½®
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_NAME=mcp_platform
DB_USER=root
DB_PASSWORD=12345678

# Redisé…ç½®
CACHE_ENABLED=True
CACHE_TYPE=local
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Nacosé…ç½®
USE_NACOS=False
NACOS_HOST=127.0.0.1
NACOS_PORT=18848
NACOS_NAMESPACE=mcp-platform
NACOS_USERNAME=nacos
NACOS_PASSWORD=nacos

# RabbitMQé…ç½®
USE_RABBITMQ=False
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=admin
RABBITMQ_PASSWORD=admin123
RABBITMQ_VHOST=/

# JWTé…ç½®
JWT_SECRET=your-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# API Keyé…ç½®
API_KEY_SECRET=your-api-key-secret

# æ—¥å¿—é…ç½®
LOG_LEVEL=DEBUG
LOG_FILE_PATH=logs/app.log
LOG_ROTATION=100MB
LOG_RETENTION=30

# æ–‡ä»¶å­˜å‚¨é…ç½®
UPLOAD_PATH=uploads
MAX_UPLOAD_SIZE=10485760

# ç›‘æ§é…ç½®
USE_MONITORING=False
PROMETHEUS_PORT=9090
USE_JAEGER=False
JAEGER_HOST=localhost
JAEGER_PORT=6831

# é™æµç†”æ–­é…ç½®
USE_SENTINEL=False
SENTINEL_HOST=localhost
SENTINEL_PORT=8719
```

---

## 2. æµ‹è¯•ç¯å¢ƒé…ç½®

### 2.1 ç¯å¢ƒå˜é‡é…ç½®

**.env.test**ï¼š
```bash
# åº”ç”¨é…ç½®
APP_NAME=ä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
APP_ENV=test
APP_DEBUG=False
APP_PORT=8000

# æ•°æ®åº“é…ç½®
DB_TYPE=mysql
DB_HOST=test-mysql.example.com
DB_PORT=3306
DB_NAME=mcp_platform_test
DB_USER=test_user
DB_PASSWORD=test_password

# Redisé…ç½®
CACHE_ENABLED=True
CACHE_TYPE=redis
REDIS_HOST=test-redis.example.com
REDIS_PORT=6379
REDIS_PASSWORD=test_password
REDIS_DB=0

# Nacosé…ç½®
USE_NACOS=True
NACOS_HOST=test-nacos.example.com
NACOS_PORT=8848
NACOS_NAMESPACE=mcp-platform-test
NACOS_USERNAME=nacos
NACOS_PASSWORD=nacos

# RabbitMQé…ç½®
USE_RABBITMQ=True
RABBITMQ_HOST=test-rabbitmq.example.com
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=test_user
RABBITMQ_PASSWORD=test_password
RABBITMQ_VHOST=/test

# JWTé…ç½®
JWT_SECRET=test-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE_PATH=logs/test.log
LOG_ROTATION=100MB
LOG_RETENTION=7

# ç›‘æ§é…ç½®
USE_MONITORING=True
PROMETHEUS_PORT=9090
USE_JAEGER=True
JAEGER_HOST=test-jaeger.example.com
JAEGER_PORT=6831

# é™æµç†”æ–­é…ç½®
USE_SENTINEL=True
SENTINEL_HOST=test-sentinel.example.com
SENTINEL_PORT=8719
```

---

## 3. ç”Ÿäº§ç¯å¢ƒé…ç½®

### 3.1 ç¯å¢ƒå˜é‡é…ç½®

**.env.production**ï¼š
```bash
# åº”ç”¨é…ç½®
APP_NAME=ä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°
APP_ENV=production
APP_DEBUG=False
APP_PORT=8000

# æ•°æ®åº“é…ç½®
DB_TYPE=mysql
DB_HOST=prod-mysql.example.com
DB_PORT=3306
DB_NAME=mcp_platform_prod
DB_USER=prod_user
DB_PASSWORD=prod_password

# Redisé…ç½®
CACHE_ENABLED=True
CACHE_TYPE=redis
REDIS_HOST=prod-redis-cluster.example.com
REDIS_PORT=6379
REDIS_PASSWORD=prod_password
REDIS_DB=0

# Nacosé…ç½®
USE_NACOS=True
NACOS_HOST=prod-nacos.example.com
NACOS_PORT=8848
NACOS_NAMESPACE=mcp-platform-prod
NACOS_USERNAME=nacos
NACOS_PASSWORD=nacos

# RabbitMQé…ç½®
USE_RABBITMQ=True
RABBITMQ_HOST=prod-rabbitmq.example.com
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=prod_user
RABBITMQ_PASSWORD=prod_password
RABBITMQ_VHOST=/prod

# JWTé…ç½®
JWT_SECRET=prod-secret-key-here-change-this
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# æ—¥å¿—é…ç½®
LOG_LEVEL=WARNING
LOG_FILE_PATH=logs/prod.log
LOG_ROTATION=100MB
LOG_RETENTION=30

# ç›‘æ§é…ç½®
USE_MONITORING=True
PROMETHEUS_PORT=9090
USE_JAEGER=True
JAEGER_HOST=prod-jaeger.example.com
JAEGER_PORT=6831

# é™æµç†”æ–­é…ç½®
USE_SENTINEL=True
SENTINEL_HOST=prod-sentinel.example.com
SENTINEL_PORT=8719
```

---

## 4. é…ç½®æ–‡ä»¶è¯´æ˜

### 4.1 Pythoné…ç½®æ–‡ä»¶

**config/settings.py**ï¼š
```python
from pydantic import BaseSettings

class Settings(BaseSettings):
    # åº”ç”¨é…ç½®
    APP_NAME: str = "ä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°"
    APP_ENV: str = "development"
    APP_DEBUG: bool = True
    APP_PORT: int = 8000
    
    # æ•°æ®åº“é…ç½®
    DB_TYPE: str = "mysql"
    DB_HOST: str = "localhost"
    DB_PORT: int = 3306
    DB_NAME: str = "mcp_platform"
    DB_USER: str = "root"
    DB_PASSWORD: str = "12345678"
    
    # ç¼“å­˜é…ç½®
    CACHE_ENABLED: bool = True
    CACHE_TYPE: str = "local"
    
    # Nacosé…ç½®
    USE_NACOS: bool = False
    
    # RabbitMQé…ç½®
    USE_RABBITMQ: bool = False
    
    # JWTé…ç½®
    JWT_SECRET: str
    JWT_ALGORITHM: str = "HS256"
    JWT_EXPIRE_MINUTES: int = 1440
    
    class Config:
        env_file = ".env"
        case_sensitive = True

settings = Settings()
```

### 4.2 TypeScripté…ç½®æ–‡ä»¶

**src/config/index.ts**ï¼š
```typescript
export const config = {
  // åº”ç”¨é…ç½®
  appName: 'ä¼ä¸šçº§AIç»¼åˆç®¡ç†å¹³å°',
  apiBaseUrl: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api/v1',
  
  // ç¯å¢ƒé…ç½®
  isDevelopment: import.meta.env.DEV,
  isProduction: import.meta.env.PROD,
  
  // è¶…æ—¶é…ç½®
  requestTimeout: 30000,
  uploadTimeout: 60000,
  
  // åˆ†é¡µé…ç½®
  pageSize: 10,
  pageSizeOptions: [10, 20, 50, 100],
  
  // æ–‡ä»¶ä¸Šä¼ é…ç½®
  maxFileSize: 10 * 1024 * 1024, // 10MB
  allowedFileTypes: ['image/jpeg', 'image/png', 'application/pdf'],
}
```

---

## 5. å¤–éƒ¨æœåŠ¡é…ç½®

### 5.1 MySQLé…ç½®

**å¼€å‘ç¯å¢ƒ**ï¼š
```bash
# Dockerå¯åŠ¨MySQL
docker run -d \
  --name mcp-mysql \
  -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=12345678 \
  -e MYSQL_DATABASE=mcp_platform \
  mysql:8.0
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
```bash
# ä¸»ä»é…ç½®
# ä¸»åº“
docker run -d \
  --name mysql-master \
  -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=prod_password \
  -e MYSQL_REPLICATION_MODE=MASTER \
  mysql:8.0

# ä»åº“
docker run -d \
  --name mysql-slave \
  -p 3307:3306 \
  -e MYSQL_ROOT_PASSWORD=prod_password \
  -e MYSQL_REPLICATION_MODE=SLAVE \
  -e MASTER_HOST=mysql-master \
  -e MASTER_PORT=3306 \
  mysql:8.0
```

### 5.2 Redisé…ç½®

**å¼€å‘ç¯å¢ƒ**ï¼š
```bash
# Dockerå¯åŠ¨Redis
docker run -d \
  --name mcp-redis \
  -p 6379:6379 \
  redis:7.0
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
```bash
# Redisé›†ç¾¤
docker run -d \
  --name redis-master \
  -p 6379:6379 \
  redis:7.0 redis-server --appendonly yes
```

### 5.3 Nacosé…ç½®

**å¼€å‘ç¯å¢ƒ**ï¼š
```bash
# Dockerå¯åŠ¨Nacos
docker run -d \
  --name mcp-nacos \
  -p 8848:8848 \
  -p 9848:9848 \
  -e MODE=standalone \
  nacos/nacos-server:v2.2.0
```

### 5.4 RabbitMQé…ç½®

**å¼€å‘ç¯å¢ƒ**ï¼š
```bash
# Dockerå¯åŠ¨RabbitMQ
docker run -d \
  --name mcp-rabbitmq \
  -p 5672:5672 \
  -p 15672:15672 \
  -e RABBITMQ_DEFAULT_USER=guest \
  -e RABBITMQ_DEFAULT_PASS=guest \
  rabbitmq:3.12-management
```

---

## 6. é…ç½®é™çº§æ–¹æ¡ˆ

### 6.1 é™çº§ç­–ç•¥

| åŠŸèƒ½æ¨¡å— | é…ç½®å‚æ•° | é»˜è®¤å€¼ | é™çº§æ–¹æ¡ˆ |
|---------|---------|-------|---------|
| é…ç½®ä¸­å¿ƒ | `USE_NACOS` | `False` | ä½¿ç”¨æœ¬åœ°`.env`é…ç½®æ–‡ä»¶ |
| æ¶ˆæ¯é˜Ÿåˆ— | `USE_RABBITMQ` | `False` | åŒæ­¥æ‰§è¡Œï¼Œæ— å¼‚æ­¥ |
| APIç½‘å…³ | `USE_APISIX` | `False` | ç›´è¿åç«¯æœåŠ¡ |
| é™æµç†”æ–­ | `USE_SENTINEL` | `False` | æ— é™æµä¿æŠ¤ |
| åˆ†å¸ƒå¼è¿½è¸ª | `USE_JAEGER` | `False` | ä½¿ç”¨æœ¬åœ°æ—¥å¿— |
| ç›‘æ§ç³»ç»Ÿ | `USE_MONITORING` | `False` | æ— ç›‘æ§æ•°æ® |
| ç¼“å­˜æœåŠ¡ | `CACHE_ENABLED` | `False` | æ— ç¼“å­˜ |
| ç¼“å­˜ç±»å‹ | `CACHE_TYPE` | `local` | æœ¬åœ°ç¼“å­˜ |

### 6.2 é™çº§å®ç°

```python
# config/cache.py
from functools import lru_cache

class CacheManager:
    def __init__(self, cache_type: str = "local"):
        self.cache_type = cache_type
        self.redis_client = None
        
        if cache_type == "redis":
            # åˆå§‹åŒ–Rediså®¢æˆ·ç«¯
            pass
    
    async def get(self, key: str):
        if self.cache_type == "redis":
            return await self.redis_client.get(key)
        else:
            # ä½¿ç”¨æœ¬åœ°ç¼“å­˜
            return self._local_cache.get(key)
    
    async def set(self, key: str, value: any, ttl: int = 3600):
        if self.cache_type == "redis":
            await self.redis_client.setex(key, ttl, value)
        else:
            # ä½¿ç”¨æœ¬åœ°ç¼“å­˜
            self._local_cache[key] = value
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²æ–‡æ¡£](./8-éƒ¨ç½²æ–‡æ¡£.md)
- [å¤–éƒ¨è½¯ä»¶æœåŠ¡éœ€æ±‚æ¸…å•](./0-å¤–éƒ¨è½¯ä»¶æœåŠ¡éœ€æ±‚æ¸…å•.md)
- [æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£](./2-æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£.md)

---

## ğŸ’¡ æ³¨æ„äº‹é¡¹

1. **æ•æ„Ÿä¿¡æ¯**ï¼šä¸è¦å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€å¯†é’¥ï¼‰æäº¤åˆ°ä»£ç ä»“åº“
2. **ç¯å¢ƒéš”ç¦»**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®å®Œå…¨éš”ç¦»
3. **é…ç½®éªŒè¯**ï¼šå¯åŠ¨åº”ç”¨å‰éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®
4. **é…ç½®å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶
5. **é…ç½®æ›´æ–°**ï¼šé…ç½®æ›´æ–°ååŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜

---

**æ–‡æ¡£ç‰ˆæœ¬å†å²**ï¼š

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|-----|------|------|---------|
| v1.0 | 2026-01-13 | AIåŠ©æ‰‹ | åˆå§‹ç‰ˆæœ¬ |

---